


 ## Event 

### Report wayline mission progress
**Topic:** thing/product/{pid}/events

**Direction:** up

**Method:** flighttask_progress

**Data:** 
|Column|Name|Type|constraint|Description|
|---|---|---|---|---|
|ext|Expand content|struct||| 
|»current_waypoint_index|Current waypoint number|int|{}|| 
|»media_count|The number of media files generated by the execution of this flight mission|int|{}|| 
|»track_id|Wayline id|text|{}|| 
|progress|Progress|struct||| 
|»current_step|steps|enum|{&#34;1&#34;:&#34;Download kmz wayline mission&#34;,&#34;2&#34;:&#34;KMZ uploading&#34;,&#34;3&#34;:&#34;Route execution&#34;}|| 
|»percent|Progress value|int|{&#34;min&#34;:&#34;0&#34;,&#34;max&#34;:&#34;100&#34;,&#34;step&#34;:&#34;1&#34;}|| 

 
 
**Example:** 
```json
{
	"bid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"tid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"data": {
		"output": {
			"ext": {
				"current_waypoint_index": 3,
				"media_count": 6,
				"track_id": "track_id"
			},
			"progress": {
				"current_step": 19,
				"percent": 100
			},
			"status": "ok"
		},
		"result": 0
	},
	"method": "flighttask_progress",
	"timestamp": 1654070968655
}
```



 



 ## Service 

### Create wayline mission
**Topic:** thing/product/{pid}/services

**Direction:** down

**Method:** flighttask_create

**Data:**
|Column|Name|Type|constraint|Description|
|---|---|---|---|---|
|flight_id|plan ID|text|{}||
|type|mission type|text|{}||
|file|Wayline file object|struct||| 
|»url|file url|text|{}|| 
|»sign|Md5 sign|text|{}|| 

 
 
**Example:** 
```json
{
	"method": "flighttask_create",
	"timestamp:": 1654070968655,
	"bid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"tid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"data": {
		"flight_id": "xxxxxxx",
		"type": "wayline",
		"file": {
			"url": "https://xxx.com/xxxx",
			"sign": "xxxx"
		}
	}
}
```



**Topic:** thing/product/{pid}/services_reply

**Direction:** up

**Method:** flighttask_create

**Data:**
|Column|Name|Type|constraint|Description|
|---|---|---|---|---|
|result|Return code|int||Non-0 means error|

 
 
**Example:** 
```json
{
	"method": "flighttask_create",
	"bid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"tid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"timestamp:": 1654070968655,
	"data": {
		"result": 0
	}
}
```




