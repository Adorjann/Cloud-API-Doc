<center>    <img style="border-radius: 0.3125em;    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);"     src="https://terra-1-g.djicdn.com/84f990b0bbd145e6a3930de0c55d3b2b/admin/doc/077db3ca-9a39-4884-b813-8496ac58769f.png">    <br>    <div style="color:orange; border-bottom: 1px solid #d9d9d9;    display: inline-block;    color: #999;    padding: 2px;">产品架构图</div> </center>

从架构分层上可以看出，上云API是基于大疆行业版无人机的基础上对外提供的接口，整体思路采用与物联网类似的端边云架构分层。此处要特别注意，无人机并不能直接接入第三方云平台，它需要先连接网关设备（遥控器、机场），然后通过遥控器中的DJI Pilot 2或者机场间接上云，DJI Pilot 2、大疆机场在注册登录第三方云平台时，会同时把飞机和负载的能力一起上报。

网关设备与第三方云平台之间的通信链路均采用业界通用的MQTT、HTTPS、Websocket协议，并在这个协议的基础上，抽象出的各个硬件设备的物模型以及业务应用所需的功能集。

第三方云平台泛指网关设备可以直接访问的各个服务端，对于上云API来说，只要通信链路能够访问到第三方云平台服务，即可进行通信，这样对于第三方云平台的环境部署就没有做限制，无论是私有化部署还是公有云部署，只要能访问均可工作。

第三方云平台需要先部署MQTT网关、HTTPS服务、Websocket服务、对象存储等基础服务，打通与网关设备的通信链路，即可进行功能集开发实现，上云API提供的功能集主要分2部分，一部分是基于DJI Pilot 2的，有飞手操作的场景，该场景下提供的功能集有：地图元素、态势感知、直播、媒体库、航线库、设备管理。另一部分是主要面向大疆机场的场景，功能集有：固件远程升级、设备异常告警、机场远程控制等等，当然，有些功能集是两种场景均有重叠的，例如视频直播，具体使用方式详见各个功能集方案及API说明章节。

第三方云平台在打通与无人机的业务之后，即可通过自身私有协议，搭建前端web页面、APP应用、小程序等，深入业务场景例如安防、能源、环保、海事等，构建一个完整的场景业务工作流。
